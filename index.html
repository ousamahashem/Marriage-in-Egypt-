
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>الزواج في مصر - المحامي أسامة هاشم</title>
  <script src="="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body style="font-family: sans-serif; text-align: center; margin-top: 100px;">

  <h1>مرحباً بك في تطبيق المحامي أسامة هاشم</h1>

  <button id="pi-auth-btn" style="padding: 10px 20px; font-size: 18px; cursor: pointer;">الاتصال بـ Pi</button>

  <div id="user-info" style="margin-top: 30px; display: none;">
    <p>اسم المستخدم: <span id="pi-username"></span></p>
    <p>عنوان المحفظة: <span id="pi-wallet"></span></p>
  </div>

  <script>
    if (window.Pi) {
      const Pi = window.Pi;

      Pi.init({
        version: "2.0",
        sandbox: true
      });

      document.getElementById("pi-auth-btn").addEventListener("click", async () => {
        try {
          const scopes = ['username', 'payments', 'wallet_address'];

          const authResult = await Pi.authenticate(scopes, function onIncompletePaymentFound(payment) {
            console.log("دفعة غير مكتملة:", payment);
          });

          console.log("نتيجة المصادقة:", authResult);

          document.getElementById("pi-username").textContent = authResult.user.username;
          document.getElementById("pi-wallet").textContent = authResult.user.wallet_address;
          document.getElementById("user-info").style.display = "block";
          document.getElementById("pi-auth-btn").style.display = "none";

        } catch (error) {
          console.error("حدث خطأ أثناء المصادقة:", error);
          alert("تعذر الاتصال بـ Pi. تأكد من أنك تستخدم Pi Browser.");
        }
      });

    } else {
      alert("يرجى فتح التطبيق من خلال Pi Browser لتفعيل الاتصال.");
    }
  </script>
</body>
</html>
